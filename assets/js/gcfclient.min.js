/*! For license information please see gcfclient.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("GcfClient",[],t):"object"==typeof exports?exports.GcfClient=t():e.GcfClient=t()}(self,(function(){return function(){"use strict";var e={225:function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.r(t);var u="object"===("undefined"==typeof self?"undefined":c(self))&&self.self===self&&self||"object"===(void 0===r.g?"undefined":c(r.g))&&r.g.global===r.g&&r.g||void 0,l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this._name="GcfClient",this.win=t.win||u,this.opts=t,this.dom=this.win.$||this.win.jQuery,this.ajax=this.dom.ajax,this.doc=this.win.document||{},this.errs=[],this.model={},this.opts.stripe=t.stripe||{hidePostalCode:!1,style:{}},this.opts.stripe.style=i({base:{lineHeight:"1.49"}},t.stripe.style),this.init()}var t,r;return t=e,(r=[{key:"decode",value:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}},{key:"encode",value:function(e){try{return encodeURIComponent(e)}catch(t){return e}}},{key:"validateAll",value:function(e,t){return!0}},{key:"validatePhone",value:function(e,t){return!0}},{key:"validateEmployment",value:function(e,t){return!0}},{key:"preventNonNumericInput",value:function(e){var t=(e=e||this.win.event).which?e.which:e.keyCode;return!(t>31&&(t<48||t>57)&&42!==t&&(e.preventDefault(),1))}},{key:"stripeResponseHandler",value:function(e){if(e.error)return this.isSubmitting=!1,this.errs.stripe_server=e.error.message,!1;var t=e.source,r={};return e.source&&(r.card_brand=t.card.brand,r.card_last4=t.card.last4,r.card_month=t.card.month,r.card_year=t.card.year,r.pay_token=t.id,r.pay_source=JSON.stringify(t)),this.errs.server=null,r}},{key:"queryParseString",value:function(e){e=(e||"").replace("?","").replace("#","");var t=/(\w+)\[(\d+)\]/,r=this.decode,n={};return e.split("&").forEach((function(e){var i=e.split("="),o=r(i[0]),a=t.exec(o);if(a)return n[a[1]]=n[a[1]]||[],void(n[a[1]][a[2]]=r(i[1]));n[i[0]]=r(i[1]||"")})),n||{}}},{key:"doAlways",value:function(e){var t=this,r=(0,t.dom)('input[type="file"]',e[0]);setTimeout((function(){r.prop("disabled",!1),t.isSubmitting=!1}),200)}},{key:"doFormSubmit",value:function(e,t){var r=this;r.ajax({mode:"cors",cache:!1,contentType:!1,processData:!1,method:"POST",type:"POST",url:e.attr("action"),data:t}).done((function(e,t,n){r.onDone&&r.onDone(e,t,n)})).fail((function(e,t,n){r.onFail&&r.onDone(e,t,n)})).always((function(){r.doAlways(e)}))}},{key:"initStripe",value:function(e){var t=this,r=t.opts,n=t.win,i=t.dom,o=n.Stripe,a=r.stripeSelector||"#stripeElement";if("function"==typeof o){var s=i(a),c=(s.data("key")||"").trim(),u=s.data("hide-postal");c.length>2&&(t.stripe=o(c),t.elements=t.stripe.elements(),t.card=t.elements.create("card",{style:r.stripe.style,hidePostalCode:u}),t.card.mount(a),t.card.addEventListener("change",(function(e){t.errs.stripe_client=null,t.errs.stripe_server=null,e.error&&(t.errs.stripe_client=e.error.message)})))}}},{key:"safariQuirks",value:function(e){var t=this.dom,r=t('input[type="file"]:not([disabled])',e[0]);r.length>0&&r.each((function(e,r){r.files.length>0||t(r).prop("disabled",!0)}))}},{key:"init",value:function(){var e=this,t=e.opts,r=e.win,n=e.dom,i=t.formId,o=r.location.href.indexOf("?");if(o>0){var a=e.queryParseString(r.location.href.slice(o+1));for(var s in a)a[s]&&n('[name="'.concat(s,'"]')).val(a[s])}var c=function(t){e.safariQuirks(t);var r=new FormData(t[0]);if(!e.card)return e.doFormSubmit(t,r);var n={};t.serializeArray().forEach((function(e,t){n[t]=e}));var i={owner:{name:n.name,email:n.email}};n.address1&&(i.owner.address={line1:n.address1,line2:n.address2,city:n.city,state:n.state,postal_code:n.postal,country:n.country}),n.first_name&&(i.name=n.first_name+" "+n.last_name),e.stripe.createSource(e.card,i).then((function(n){var i=e.stripeResponseHandler(n);if(i){for(var o in i)r.append(o,i[o]);e.doFormSubmit(t,r)}else e.doAlways(t)}))},u=n(document.forms[0]);i&&(u=n("#"+i)),u.on("submit",(function(t){if(t.preventDefault(),e.isSubmitting)return!1;e.validateAll(e,u),e.validatePhone(e,u),e.validateEmployment(e,u);var n=e.errs,i=e.errs.length<=0;if(i=(i=i&&!n.phone&&!n.amount&&!n.stripe_client&&!n.stripe_server)&&!n.employer&&!n.occupation){e.isSubmitting=!0;var o=u.find('input[name="g-recaptcha-response"]');r.grecaptcha&&o.length>0?r.grecaptcha.ready((function(){r.grecaptcha.execute(o.data("sitekey"),{action:o.data("action")||u.attr("id")}).then((function(e){o.val(e),c(u)}))})):c(u)}return!1})),r.Stripe&&e.initStripe(u)}}])&&s(t.prototype,r),e}();t.default=l}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}return r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(225)}()}));
//# sourceMappingURL=gcfclient.min.js.map